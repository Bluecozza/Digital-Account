<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon" href="images/apple-touch-icon.png" />
<link rel="apple-touch-startup-image" href="images/apple-touch-startup-image-320x460.png" />
<title>D-A</title>
<link rel="stylesheet" href="css/framework7.css">
<link rel="stylesheet" href="style.css">
<link type="text/css" rel="stylesheet" href="css/swipebox.css" />
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,700,900' rel='stylesheet' type='text/css'>
<script src="js/app.js"></script>  
<script src="js/config.js"></script>  
<script type="text/javascript" src="js/jquery-1.12.1.min.js"></script>
<script type="text/javascript" src="js/jquerysession.js"> </script>
<script src="cordova.js"></script>         <!-- phantom library, needed for Cordova api calls, added during build -->
    <script src="xdk/init-dev.js"></script>     <!-- normalizes device and document ready events, see README for details -->
<script>

$(document).ready(function() {

	$("#submit").click(function() {
		var datalogin = {
			appid: appId,
			appsecret: appSecret,
			username: $("#username").val(),
			password: $("#password").val()
		};

		$.ajax({
			type: "get",
			url : "http://d-a.im/api/account/login", 
			data: datalogin,
			dataType:"jsonp", //seperti biasanya
			beforeSend:function(){
             $("#title_login").html(appName + " loading..");
           },
			error: function(data) {
				$("#title_login").html("Unknown error");
			},
			success: function(data)
			{
	switch (JSON.parse(data.status)) {
    case 404:
					$('#title_login').html("Error: User Not Found");
        break; 
    case 200:
					$("#title_login").html("success. Please wait..");
					$.session.set('uid',data.u_id);
					$.session.set('username',data.u_username);
					$.session.set('uname',data.u_name);
					$.session.set('uemail',data.u_email);
					$.session.set('upicture',data.u_picture);
					$.session.set('ustatus',data.u_status);
					location.href = "index.html";
        break; 
    default: 
					$('#title_login').html("error");
	}
			},

		});
		return false;
	});

});

</script>
</head>
<body id="mobile_wrap">

    <div class="statusbar-overlay"></div>
    <div class="panel-overlay"></div>
    <div class="content-block">
      <h4 id='title_login'>LOGIN</h4>
            <div class="loginform">
            <form id="LoginForm">
            <label>Username:</label>
            <input type="text" name="username" id="username" value="" class="form_input required" />
            <label>Password:</label>
            <input type="password" name="password" id="password" value="" class="form_input required" />
            <input type="submit" name="submit" class="form_submit" id="submit" value="Login" />
            </form>
            </div>
    </div>


<script src="js/jquery.validate.min.js" type="text/javascript"></script>
<script type="text/javascript" src="js/framework7.min.js"></script>
<script type="text/javascript" src="js/my-app.js"></script>
<script type="text/javascript" src="js/jquery.swipebox.js"></script>
<script type="text/javascript" src="js/jquery.fitvids.js"></script>
<script type="text/javascript" src="js/email.js"></script>
  </body>
</html>